<div class="container-fluid">
  <div class="row d-flex justify-content-center">
    <div class="col-12 col-sm-10 col-lg-8 p-4">
      <form
        [formGroup]="editContactForm"
        (submit)="updateContactInfo()"
        class="row rounded-5 flex-column p-2 p-sm-4 bg-white shadow"
      >
        <div
          class="container-fluid align-items-center flex-column rounded-5 p-md-3"
        >
          <div class="row row-cols-auto justify-content-center flex-row-lg p-2">
            <app-contact-image
              [img]="{ url: contact.contactPhoto, width: 130 }"
            ></app-contact-image>

            <div
              class="col-12 col-md-6 col-lg-9 d-flex justify-content-center justify-content-lg-start"
            >
              <input
                type="text"
                [formControlName]="contactFirstName"
                class="fs-3 align-self-center m-1 rounded-3 border text-end text-md-start col-6 col-lg-5"
              />
              <input
                type="text"
                [formControlName]="contactLastName"
                class="fs-3 align-self-center m-1 rounded-3 border col-6 col-lg-5"
              />
            </div>
          </div>
        </div>

        <div class="container-fluid m-auto contact-card-info">
          <div class="row">
            <div
              class="col-4 col-lg-3 p-2 d-flex justify-content-end align-items-start"
            >
              <span class="text-break m-1"> Empresa</span>
            </div>

            <div class="col-8 col-lg-9 d-flex flex-column flex-sm-row p-1">
              <input
                type="text"
                [formControlName]="contactCompany"
                class="p-1 rounded-3 border"
              />
            </div>
          </div>

          <div class="row">
            <div
              class="col-4 col-lg-3 p-2 d-flex justify-content-end align-items-start"
            >
              <span class="text-break m-1"> Correos</span>
            </div>

            <!--  -->
            <div class="col-8 col-lg-9 d-flex flex-column p-1">
              <div class="container" formArrayName="contactEmails">
                <div
                  *ngFor="
                    let emailControl of contactEmailsFormArray.controls;
                    let i = index
                  "
                  class="row flex-column flex-lg-row"
                >
                  <input
                    type="text"
                    [formControlName]="i"
                    placeholder="Correo electrónico"
                    class="p-1 my-1 rounded-3 border"
                  />
                </div>
              </div>
            </div>
            <!--  -->
          </div>

          <div class="row">
            <div
              class="col-4 col-lg-3 p-2 d-flex justify-content-end align-items-start"
            >
              <span class="text-break m-1"> Cumpleaños</span>
            </div>

            <div class="col-8 col-lg-9 d-flex flex-column flex-sm-row p-1">
              <input
                type="text"
                [formControlName]="contactBirthday"
                class="p-1 rounded-3 border"
              />
            </div>
          </div>

          <div class="row">
            <div
              class="col-4 col-lg-3 p-2 d-flex justify-content-end align-items-start"
            >
              <span class="text-break m-1"> Alias</span>
            </div>
            <div class="col-8 col-lg-9 d-flex flex-column flex-sm-row p-1">
              <input
                type="text"
                [formControlName]="contactAlias"
                class="p-1 rounded-3 border"
              />
            </div>
          </div>

          <div class="row">
            <div
              class="col-4 col-lg-3 p-2 d-flex justify-content-end align-items-start"
            >
              <span class="text-break m-1"> Notas</span>
            </div>

            <div class="col-8 col-lg-9 d-flex flex-column p-1">
              <div class="container">
                <div class="row flex-column flex-lg-row">
                  <input
                    type="text"
                    [formControlName]="contactNotes"
                    placeholder="Notas"
                    class="p-1 rounded-3 border"
                  />
                </div>
              </div>
            </div>
          </div>

          <div class="row tags">
            <div
              class="col-4 col-lg-3 p-2 d-flex justify-content-end align-items-start"
            >
              <span class="text-break m-1"> Etiquetas</span>
            </div>

            <div class="col-8 col-lg-9 d-flex flex-column p-0">
              <div class="container" formArrayName="contactTags">
                <div class="row flex-row">
                  <input
                    *ngFor="
                      let tagsControl of contactTagsFormArray.controls;
                      let i = index
                    "
                    type="text"
                    [formControlName]="i"
                    placeholder="Etiquetas"
                    class="p-1 m-1 rounded-3 text-center border"
                    [style.width]="tagsControl.value.length * 12 + 'px'"
                  />
                </div>
              </div>
            </div>
          </div>

          <div class="row">
            <div
              class="col-4 col-lg-3 p-2 d-flex justify-content-end align-items-start"
            >
              <span class="text-break m-1"> Telefonos</span>
            </div>

            <div class="col-8 col-lg-9 d-flex flex-column p-1">
              <div class="container" formArrayName="contactPhones">
                <!--  -->

                <div
                  *ngFor="
                    let formGroup of contactPhonesFormArray.controls;
                    let i = index
                  "
                >
                  <input
                    type="text"
                    [formControlName]="i"
                    placeholder="Teléfono"
                    class="p-1 my-1 border rounded-3 col-12 col-sm-5 col-md-4 col-lg-3 col-xxl-2"
                  />
                </div>

                <ng-template dynamicPhoneInput></ng-template>
                <button
                  type="button"
                  name=""
                  class="btn bg-danger"
                  id=""
                  (click)="deleteComponent(contactPhonesFormArray.length - 1)"
                >
                  ✕
                </button>

                <input
                  type="button"
                  name=""
                  class="btn border"
                  id=""
                  value="Agregar telefono"
                  (click)="addNewPhone()"
                />
                <!--  -->
              </div>
            </div>

            <div
              class="d-flex justify-content-center justify-content-md-end p-4"
            >
              <button type="submit" class="btn btn-primary">
                Guardar cambios
              </button>
            </div>
          </div>
        </div>
      </form>
    </div>
  </div>
</div>
